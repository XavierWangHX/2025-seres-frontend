<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <title>Seres 研究助手</title>
    <meta name="description" content="由Qwen-Max提供支持的研究助手">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="./static/seres.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
   
    <!-- 添加marked和DOMPurify库 -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify/dist/purify.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>

    
    <style>
        /* 基础样式 */
:root {
    --primary-color: #9867F0;
    --secondary-color: #ED4E50;
    --text-color: #2c3e50;
    --text-light: #666;
    --card-shadow: 0 5px 15px rgba(0,0,0,0.05);
    --hover-shadow: 0 10px 25px rgba(0,0,0,0.1);
    --border-radius: 12px;
}

html, body {
    scroll-behavior: smooth;
    background: #f5f7fa;
    font-family: 'Montserrat', 'PingFang SC', 'Microsoft YaHei', sans-serif;
    color: var(--text-color);
    line-height: 1.7;
    position: relative;
    padding-top: 60px;
}

/* 导航栏样式 */
.navbar {
    padding: 15px 0;
    background: white !important;
    box-shadow: 0 2px 15px rgba(0,0,0,0.1);
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 1000;
}

.navbar-brand {
    font-weight: 700;
    color: var(--text-color);
    display: flex;
    align-items: center;
}

.navbar-brand img {
    margin-right: 10px;
    height: 40px;
}

.nav-link {
    color: var(--text-light) !important;
    font-weight: 500;
    padding: 10px 20px !important;
    border-radius: 20px;
    transition: all 0.3s ease;
    margin: 0 5px;
}

.nav-link:hover, .nav-link.active {
    background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
    color: white !important;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

.nav-link i {
    margin-right: 8px;
}

/* 首页区域 */
.landing {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: calc(100vh - 60px);
    text-align: center;
    padding: 40px 20px;
    margin-top: 0;
    background: linear-gradient(135deg, rgba(152,103,240,0.05) 0%, rgba(237,78,80,0.05) 100%);
}

.landing h1 {
    font-size: 3.5rem;
    font-weight: 800;
    margin-bottom: 1.5rem;
    line-height: 1.2;
    background-image: linear-gradient(to right, var(--primary-color), var(--secondary-color));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.landing p {
    font-size: 1.5rem;
    font-weight: 400;
    max-width: 800px;
    margin: 0 auto 2.5rem;
    color: var(--text-light);
}

/* 主容器 */
.container {
    padding: 40px;
    background: white;
    box-shadow: var(--card-shadow);
    border-radius: var(--border-radius);
    margin: 60px auto;
    border: none;
    transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
    max-width: 1200px;
}

.container:hover {
    box-shadow: 0 15px 30px rgba(0,0,0,0.1);
}

/* 输入框和选择框 */
input, select, textarea, #output, #reportContainer {
    background: white;
    border: 1px solid #e0e0e0;
    color: var(--text-color);
    transition: all 0.3s ease;
    border-radius: var(--border-radius);
    padding: 14px 20px;
    font-size: 1rem;
    width: 100%;
}

input:hover, input:focus, 
select:hover, select:focus,
textarea:hover, textarea:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(152,103,240,0.2);
    outline: none;
}

/* 按钮 */
.btn-primary {
    background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
    border: none;
    transition: all 0.3s ease;
    font-size: 1.1rem;
    padding: 14px 35px;
    border-radius: 50px;
    min-width: 200px;
    text-align: center;
    box-shadow: 0 6px 18px rgba(152,103,240,0.4);
    font-weight: 600;
    letter-spacing: 0.5px;
    position: relative;
    overflow: hidden;
    color: white;
    border: none;
}

.btn-primary:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 25px rgba(152,103,240,0.5);
}

.btn-primary:active {
    transform: translateY(1px);
}

/* 代理问题标签 */
.agent-question {
    font-size: 1.5rem;
    font-weight: 600;
    margin-bottom: 1rem;
    color: var(--text-color);
    position: relative;
    display: inline-block;
}

.agent-question::after {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 0;
    width: 50px;
    height: 4px;
    background: linear-gradient(to right, var(--primary-color), transparent);
    border-radius: 2px;
}

/* 页脚 */
footer {
    position: relative;
    width: 100%;
    color: var(--text-light);
    text-align: center;
    padding: 30px 0;
    background: white;
    border-top: 1px solid #eee;
    margin-top: 60px;
}

/* 内容区块 */
.margin-div {
    margin: 30px 0;
    padding: 30px;
    background: white;
    border-radius: var(--border-radius);
    transition: all 0.3s ease;
    box-shadow: var(--card-shadow);
}

.margin-div:hover {
    box-shadow: var(--hover-shadow);
}

/* 标题样式 */
.research-output-container h2, 
.report-container h2,
.chat-container h2 {
    color: var(--text-color);
    font-weight: 700;
    font-size: 1.9rem;
    margin-bottom: 1.5rem;
    padding-bottom: 0.8rem;
    display: flex;
    align-items: center;
    position: relative;
}

.research-output-container h2::after,
.report-container h2::after,
.chat-container h2::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 60px;
    height: 3px;
    background: linear-gradient(to right, var(--primary-color), transparent);
    border-radius: 3px;
}

/* 输出区域 */
#output {
    height: 300px;
    overflow: auto;
    padding: 20px;
    margin: 15px 0;
    border-radius: var(--border-radius);
    background: white;
    border: 1px solid #eee;
    line-height: 1.8;
}

/* 报告容器 */
#reportContainer {
    font-family: 'Georgia', 'Times New Roman', Times, serif;
    font-size: 18px !important;
    line-height: 1.8;
    background: white;
    padding: 30px;
    border-radius: var(--border-radius);
    border: 1px solid #eee;
}

/* 图片容器 */
#selectedImagesContainer {
    background: rgba(255, 255, 255, 0.9);
    border-radius: var(--border-radius);
    padding: 20px;
    margin-bottom: 25px;
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    justify-content: center;
    border: 1px dashed #e0e0e0;
}

#selectedImagesContainer img {
    width: 160px;
    height: 160px;
    object-fit: cover;
    cursor: pointer;
    transition: all 0.3s ease;
    border-radius: 10px;
    box-shadow: var(--card-shadow);
    border: 1px solid #eee;
}

#selectedImagesContainer img:hover {
    transform: scale(1.05);
    box-shadow: var(--hover-shadow);
    border-color: var(--primary-color);
}

/* 导航按钮 */
.nav-buttons {
    position: fixed;
    top: 20px;
    right: 20px;
    display: flex;
    gap: 12px;
    z-index: 1001;
}

.top-history-button, 
.top-websocket-button {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 18px;
    border-radius: 50px;
    font-weight: 600;
    font-size: 0.95rem;
    cursor: pointer;
    transition: all 0.3s ease;
    min-width: 120px;
    justify-content: center;
    box-shadow: var(--card-shadow);
    background: white;
    color: var(--primary-color);
    border: 1px solid rgba(152,103,240,0.2);
}

.top-history-button:hover, 
.top-websocket-button:hover {
    transform: translateY(-3px);
    box-shadow: var(--hover-shadow);
    background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
    color: white;
}

/* 滚动到底部按钮 */
.scroll-to-bottom {
    position: fixed;
    bottom: 30px;
    right: 30px;
    background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
    width: 60px;
    height: 60px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    box-shadow: 0 8px 25px rgba(152,103,240,0.4);
    cursor: pointer;
    opacity: 0.9;
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    z-index: 1000;
    border: none;
}

.scroll-to-bottom:hover {
    opacity: 1;
    transform: translateY(-5px) scale(1.05);
    box-shadow: 0 12px 30px rgba(152,103,240,0.5);
}

.scroll-to-bottom i {
    font-size: 24px;
    transition: transform 0.3s ease;
}

.scroll-to-bottom:hover i {
    transform: translateY(3px);
}

/* 加载动画 */
.modern-spinner {
    display: inline-block;
    width: 26px;
    height: 26px;
    border-radius: 50%;
    border: 3px solid rgba(152,103,240,0.2);
    border-top-color: var(--primary-color);
    vertical-align: middle;
    margin-right: 15px;
    animation: spin 1.5s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* 响应式调整 */
@media (max-width: 992px) {
    .landing h1 {
        font-size: 2.8rem;
    }
    
    .landing p {
        font-size: 1.3rem;
    }
    
    .container {
        padding: 30px;
        margin: 40px auto;
    }
}

@media (max-width: 768px) {
    html, body {
        padding-top: 70px;
    }
    
    .landing {
        min-height: calc(100vh - 70px);
        padding: 30px 20px;
    }
    
    .landing h1 {
        font-size: 2.2rem;
    }
    
    .landing p {
        font-size: 1.1rem;
    }
    
    .container {
        padding: 20px;
        margin: 30px auto;
    }
    
    .margin-div {
        padding: 20px;
    }
    
    .btn-primary {
        padding: 12px 25px;
        min-width: 160px;
        font-size: 1rem;
    }

    .nav-link {
        padding: 8px 15px !important;
        margin: 5px 0;
    }
    
    .nav-buttons {
        top: 15px;
        right: 15px;
    }
    
    .top-history-button, 
    .top-websocket-button {
        min-width: auto;
        padding: 8px 12px;
        font-size: 0;
    }
    
    .top-history-button i, 
    .top-websocket-button i {
        margin-right: 0;
        font-size: 1.2rem;
    }
    
    .scroll-to-bottom {
        width: 50px;
        height: 50px;
        bottom: 20px;
        right: 20px;
    }
}

:root {
    --transition-speed: 0.3s;
    --scrollbar-width: 8px;
    
    /* 导览部分颜色方案 */
    --nav-primary-color: #6a11cb; /* 深紫色 */
    --nav-secondary-color: #ff5e62; /* 珊瑚红 */
    --nav-accent-color: #00ff9d; /* 霓虹绿 */
    --nav-text-color: #f5f7fa; /* 浅灰白 */
    --nav-bg-color: #1a1a2e; /* 深蓝灰 */
    --nav-card-bg: #2a2a40; /* 中蓝灰 */
    --nav-border-glow: 0 0 10px rgba(106, 17, 203, 0.5);
    
    /* Main部分颜色方案 */
    --main-primary-color: #00b4db; /* 天蓝色 */
    --main-secondary-color: #0083b0; /* 深蓝色 */
    --main-accent-color: #ff9500; /* 暖橙色 */
    --main-text-color: #f3f4f6; /* 浅灰 */
    --main-bg-color: #1a1a2e; /* 深蓝灰 */
    --main-card-bg: #2a2a40; /* 中蓝灰 */
    --main-border-glow: 0 0 10px rgba(0, 180, 219, 0.5);
}

body {
    scroll-behavior: smooth;
    background: var(--nav-bg-color);
    font-family: 'Inter', 'PingFang SC', 'Microsoft YaHei', sans-serif;
    color: var(--nav-text-color);
    line-height: 1.7;
    position: relative;
    padding-top: 60px;
    overflow-x: hidden;
}

/* 导航栏 - 玻璃态效果 */
.navbar {
    padding: 15px 0;
    background: rgba(42, 42, 64, 0.8) !important;
    backdrop-filter: blur(10px);
    box-shadow: 0 2px 15px rgba(0, 0, 0, 0.3);
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 1000;
    border-bottom: 1px solid rgba(106, 17, 203, 0.3);
}

.navbar-brand {
    font-weight: 700;
    color: var(--nav-text-color);
    display: flex;
    align-items: center;
    text-shadow: 0 0 10px rgba(106, 17, 203, 0.5);
}

.navbar-brand img {
    margin-right: 10px;
    height: 40px;
    filter: drop-shadow(0 0 5px rgba(106, 17, 203, 0.7));
}

.nav-link {
    color: var(--nav-text-color) !important;
    font-weight: 500;
    padding: 10px 20px !important;
    border-radius: 20px;
    transition: all var(--transition-speed);
    margin: 0 5px;
    position: relative;
}

.nav-link::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 2px;
    background: var(--nav-accent-color);
    transition: width var(--transition-speed);
}

.nav-link:hover::after, .nav-link.active::after {
    width: 60%;
}

.nav-link:hover, .nav-link.active {
    color: white !important;
    text-shadow: 0 0 10px var(--nav-accent-color);
}

/* 导览部分样式 */
.homepage {
    background: var(--nav-bg-color);
    padding: 4rem 0;
    position: relative;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.homepage-header {
    text-align: center;
    margin-bottom: 4rem;
}

.homepage-header img {
    margin: 0 auto 20px;
    display: block;
    width: 180px;
    height: auto;
    transition: transform 0.5s ease;
}

.homepage-header img:hover {
    transform: scale(1.05);
}

.homepage-header h1 {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 1rem;
    background: linear-gradient(90deg, var(--nav-primary-color), var(--nav-secondary-color));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 0 0 15px rgba(106, 17, 203, 0.2);
}

.homepage-header p {
    font-size: 1.1rem;
    color: #cbd5e1;
    max-width: 800px;
    margin: 0 auto;
}

.section-title {
    text-align: center;
    color: var(--nav-text-color);
    font-weight: 700;
    font-size: 2.2rem;
    margin-bottom: 3rem;
    position: relative;
    display: inline-block;
}

.section-title::after {
    content: '';
    position: absolute;
    bottom: -15px;
    left: 50%;
    transform: translateX(-50%);
    width: 80px;
    height: 4px;
    background: linear-gradient(90deg, var(--nav-primary-color), var(--nav-secondary-color));
    border-radius: 4px;
}

.quick-access-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 30px;
    margin: 40px auto;
    max-width: 1200px;
    padding: 0 20px;
}

.quick-access-card {
    background: linear-gradient(135deg, rgba(42, 42, 64, 0.8), rgba(30, 30, 45, 0.8));
    border-radius: 20px;
    padding: 40px 30px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    transition: all var(--transition-speed);
    cursor: pointer;
    text-align: center;
    position: relative;
    overflow: hidden;
    border: 1px solid rgba(106, 17, 203, 0.1);
    backdrop-filter: blur(5px);
}

.quick-access-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 4px;
    background: linear-gradient(to right, var(--nav-primary-color), var(--nav-secondary-color));
    opacity: 0;
    transition: opacity 0.3s ease;
}

.quick-access-card:hover::before {
    opacity: 1;
}

.quick-access-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
    border-color: rgba(106, 17, 203, 0.3);
}

.quick-access-card i {
    font-size: 2.8rem;
    margin-bottom: 25px;
    background: linear-gradient(to right, var(--nav-primary-color), var(--nav-secondary-color));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    transition: transform 0.5s ease;
}

.quick-access-card:hover i {
    transform: scale(1.1) rotate(5deg);
}

.quick-access-card h3 {
    color: var(--nav-text-color);
    margin-bottom: 15px;
    font-size: 1.5rem;
    font-weight: 700;
}

.quick-access-card p {
    color: #cbd5e1;
    font-size: 1rem;
    margin-bottom: 0;
}

/* 平滑滚动到研究部分的指示器 */
.scroll-indicator {
    position: absolute;
    bottom: 40px;
    left: 50%;
    transform: translateX(-50%);
    animation: bounce 2s infinite;
    opacity: 0.7;
    transition: opacity 0.3s;
}

.scroll-indicator:hover {
    opacity: 1;
}

.scroll-indicator i {
    font-size: 2rem;
    color: var(--nav-accent-color);
}

@keyframes bounce {
    0%, 20%, 50%, 80%, 100% {
        transform: translateY(0) translateX(-50%);
    }
    40% {
        transform: translateY(-20px) translateX(-50%);
    }
    60% {
        transform: translateY(-10px) translateX(-50%);
    }
}

/* Main部分容器样式 */
main.container {
    padding: 50px;
    background: linear-gradient(135deg, rgba(42, 42, 64, 0.8), rgba(30, 30, 45, 0.8));
    backdrop-filter: blur(15px);
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
    border-radius: 24px;
    margin: 100px auto;
    border: 1px solid rgba(0, 180, 219, 0.2);
    transition: all var(--transition-speed);
    max-width: 1300px;
    position: relative;
}

main.container::before {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: linear-gradient(135deg, var(--main-primary-color), var(--main-secondary-color));
    z-index: -1;
    border-radius: 24px;
    opacity: 0;
    transition: opacity var(--transition-speed);
}

main.container:hover::before {
    opacity: 1;
}

/* Main部分输入框样式 */
main input, main select, main textarea, main #output, main #reportContainer {
    background: rgba(42, 42, 64, 0.8);
    border: 1px solid rgba(0, 180, 219, 0.3);
    color: var(--main-text-color);
    transition: all var(--transition-speed);
    border-radius: 12px;
    padding: 16px 24px;
    font-size: 1.05rem;
    width: 100%;
    backdrop-filter: blur(5px);
}

main input:hover, main input:focus, 
main select:hover, main select:focus,
main textarea:hover, main textarea:focus {
    border-color: var(--main-accent-color);
    box-shadow: 0 0 20px rgba(255, 149, 0, 0.3);
    outline: none;
    transform: translateY(-2px);
}

/* Main部分按钮样式 */
main .btn-primary {
    background: linear-gradient(45deg, var(--main-primary-color), var(--main-secondary-color));
    border: none;
    transition: all var(--transition-speed);
    font-size: 1.2rem;
    padding: 16px 40px;
    border-radius: 50px;
    min-width: 220px;
    text-align: center;
    box-shadow: 0 0 30px rgba(0, 180, 219, 0.5);
    font-weight: 600;
    letter-spacing: 0.8px;
    position: relative;
    overflow: hidden;
    color: white;
    z-index: 1;
    transform: translateY(0);
}

main .btn-primary::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(45deg, var(--main-secondary-color), var(--main-primary-color));
    opacity: 0;
    transition: opacity var(--transition-speed);
    z-index: -1;
}

main .btn-primary:hover::before {
    opacity: 1;
}

main .btn-primary:hover {
    transform: translateY(-5px);
    box-shadow: 0 0 40px rgba(0, 180, 219, 0.7);
    text-shadow: 0 0 10px white;
}

main .btn-primary:active {
    transform: translateY(0);
    box-shadow: 0 0 20px rgba(0, 180, 219, 0.5);
}

/* Main部分标题样式 */
main .research-output-container h2, 
main .report-container h2,
main .chat-container h2 {
    color: var(--main-text-color);
    font-weight: 700;
    font-size: 2rem;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    display: flex;
    align-items: center;
    position: relative;
}

main .research-output-container h2::after, 
main .report-container h2::after,
main .chat-container h2::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100px;
    height: 4px;
    background: linear-gradient(90deg, var(--main-primary-color), var(--main-secondary-color));
    border-radius: 4px;
}

/* 滚动容器样式 */
.scrollable-container {
    position: relative;
    border-radius: 16px;
    margin-top: 20px;
    background: rgba(30, 30, 45, 0.5);
    border: 1px solid rgba(0, 180, 219, 0.1);
    transition: all var(--transition-speed);
}

.scrollable-container:hover {
    border-color: rgba(0, 180, 219, 0.3);
}

/* 自定义滚动条 */
.scrollable-container::-webkit-scrollbar {
    width: var(--scrollbar-width);
}

.scrollable-container::-webkit-scrollbar-track {
    background: rgba(30, 30, 45, 0.8);
    border-radius: 10px;
}

.scrollable-container::-webkit-scrollbar-thumb {
    background: linear-gradient(to bottom, var(--main-primary-color), var(--main-secondary-color));
    border-radius: 10px;
    opacity: 0.7;
    transition: opacity var(--transition-speed);
}

.scrollable-container::-webkit-scrollbar-thumb:hover {
    opacity: 1;
}

/* 数据网格效果 */
.tech-grid {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: 
        linear-gradient(rgba(106, 17, 203, 0.05) 1px, transparent 1px),
        linear-gradient(90deg, rgba(106, 17, 203, 0.05) 1px, transparent 1px);
    background-size: 40px 40px;
    pointer-events: none;
    z-index: -1;
    opacity: 0.5;
}

/* 响应式调整 */
@media (max-width: 992px) {
    .homepage-header h1 {
        font-size: 2rem;
    }
    
    .homepage-header p {
        font-size: 1rem;
    }
    
    .quick-access-grid {
        grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
        gap: 20px;
    }
    
    .quick-access-card {
        padding: 30px 20px;
    }
    
    .quick-access-card i {
        font-size: 2.2rem;
    }
    
    .quick-access-card h3 {
        font-size: 1.3rem;
    }
    
    main.container {
        padding: 30px;
        margin: 60px auto;
    }
    
    main .btn-primary {
        padding: 14px 30px;
        min-width: 180px;
        font-size: 1rem;
    }
}

@media (max-width: 768px) {
    html, body {
        padding-top: 70px;
    }
    
    .container {
        padding: 20px;
        margin: 30px auto;
    }
    
    .nav-link {
        padding: 8px 15px !important;
        margin: 5px 0;
    }
    
    .nav-buttons {
        top: 15px;
        right: 15px;
    }
    
    .top-history-button, 
    .top-websocket-button {
        min-width: auto;
        padding: 8px 12px;
        font-size: 0;
    }
    
    .top-history-button i, 
    .top-websocket-button i {
        margin-right: 0;
        font-size: 1.2rem;
    }
    
    .scroll-to-bottom {
        width: 50px;
        height: 50px;
        bottom: 20px;
        right: 20px;
    }
    
    main .research-output-container h2, 
    main .report-container h2,
    main .chat-container h2 {
        font-size: 1.6rem;
    }
    
    .scrollable-container {
        max-height: 350px;
    }
}

/* 历史面板 */
.history-panel {
    position: fixed;
    right: -380px;
    top: 0;
    width: 380px;
    height: 100vh;
    background-color: rgba(42, 42, 64, 0.95);
    box-shadow: -10px 0 30px rgba(0, 0, 0, 0.3);
    transition: right 0.5s cubic-bezier(0.77, 0.2, 0.05, 1.0);
    z-index: 1000;
    padding: 2rem;
    overflow-y: auto;
    border-left: 1px solid rgba(106, 17, 203, 0.2);
    backdrop-filter: blur(10px);
}

.history-panel.active {
    right: 0;
}

/* Markdown内容样式 */
#reportContainer h1, 
#reportContainer h2, 
#reportContainer h3 {
    color: var(--main-text-color);
    margin-top: 2rem;
    margin-bottom: 1.2rem;
    font-weight: 600;
}

#reportContainer h1 {
    font-size: 1.8rem;
    border-bottom: 1px solid rgba(0, 180, 219, 0.2);
    padding-bottom: 0.5rem;
}

#reportContainer h2 {
    font-size: 1.5rem;
}

#reportContainer h3 {
    font-size: 1.3rem;
}

#reportContainer p {
    margin-bottom: 1.2rem;
    color: #e2e8f0;
    line-height: 1.8;
}

#reportContainer a {
    color: var(--main-primary-color);
    text-decoration: none;
    transition: all 0.3s;
    position: relative;
    display: inline-block;
}

#reportContainer a::after {
    content: '';
    position: absolute;
    width: 0;
    height: 2px;
    bottom: -2px;
    left: 0;
    background-color: var(--main-accent-color);
    transition: width 0.3s;
}

#reportContainer a:hover {
    color: var(--main-accent-color);
}

#reportContainer a:hover::after {
    width: 100%;
}



#reportContainer pre {
    background-color: rgba(30, 30, 45, 0.8);
    padding: 1.5rem;
    border-radius: 10px;
    overflow-x: auto;
    color: #e2e8f0;
    border: 1px solid rgba(0, 180, 219, 0.2);
    margin-bottom: 1.5rem;
    transition: all 0.3s;
}



#reportContainer blockquote {
    border-left: 4px solid var(--main-secondary-color);
    padding-left: 1.5rem;
    margin-left: 0;
    color: #94a3b8;
    background-color: rgba(0, 131, 176, 0.05);
    font-style: italic;
    padding-top: 1rem;
    padding-bottom: 1rem;
    margin-top: 1.5rem;
    margin-bottom: 1.5rem;
}

#reportContainer table {
    border-collapse: collapse;
    width: 100%;
    margin-bottom: 1.5rem;
}

#reportContainer th, 
#reportContainer td {
    border: 1px solid rgba(0, 180, 219, 0.2);
    padding: 12px;
    text-align: left;
    color: #e2e8f0;
}

#reportContainer th {
    background-color: rgba(0, 180, 219, 0.1);
    font-weight: 600;
}

#reportContainer tr:hover {
    background-color: rgba(0, 180, 219, 0.05);
}

/* 聊天容器 */
.chat-messages {
    max-height: 400px;
    overflow-y: auto;
    padding: 20px;
    background: rgba(30, 30, 45, 0.7);
    border-radius: 16px;
    margin-bottom: 20px;
    border: 1px solid rgba(0, 180, 219, 0.1);
}

.chat-message {
    margin-bottom: 20px;
    padding: 15px 20px;
    border-radius: 16px;
    position: relative;
    opacity: 0;
    transform: translateY(10px);
    transition: all 0.3s ease-out;
}

.chat-message.visible {
    opacity: 1;
    transform: translateY(0);
}

.chat-message.user {
    background: linear-gradient(135deg, rgba(0, 131, 176, 0.1), rgba(0, 131, 176, 0.05));
    border: 1px solid rgba(0, 131, 176, 0.2);
    text-align: right;
    margin-left: 20%;
}

.chat-message.ai {
    background: linear-gradient(135deg, rgba(0, 180, 219, 0.1), rgba(0, 180, 219, 0.05));
    border: 1px solid rgba(0, 180, 219, 0.2);
    margin-right: 20%;
}

.chat-input-container {
    display: flex;
    gap: 15px;
    align-items: flex-end;
}

.chat-input {
    flex-grow: 1;
}

/* 展开按钮样式 */
.expand-button {
    background: none;
    border: none;
    color: rgba(255, 255, 255, 0.5);
    margin-left: 15px;
    transition: all 0.3s;
    padding: 0;
    font-size: 1.2rem;
}

.expand-button:hover {
    color: rgba(255, 255, 255, 0.8);
    transform: scale(1.1);
}

/* 微调器样式 */
.modern-spinner {
    display: inline-block;
    width: 24px;
    height: 24px;
    margin-right: 15px;
    border: 3px solid rgba(0, 180, 219, 0.3);
    border-radius: 50%;
    border-top-color: var(--main-primary-color);
    animation: spin 1s linear infinite;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

/* 加载状态样式 */
.loading-placeholder {
    position: relative;
    overflow: hidden;
    background-color: rgba(30, 30, 45, 0.5);
    border-radius: 5px;
    margin-bottom: 10px;
    height: 20px;
}

.loading-placeholder::after {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    transform: translateX(-100%);
    background: linear-gradient(90deg, 
        rgba(30, 30, 45, 0.5), 
        rgba(42, 42, 64, 0.8), 
        rgba(30, 30, 45, 0.5));
    animation: shimmer 2s infinite;
}

@keyframes shimmer {
    100% {
        transform: translateX(100%);
    }
}

/* 报告容器样式 */
#reportContainer {
    min-height: 300px;
    max-height: 700px;
    overflow-y: auto;
    background: rgba(255, 255, 255, 0.02);
    border-radius: 16px;
    padding: 40px;
    line-height: 1.8;
    position: relative;
}

/* A4纸样式 */
.a4-container {
    width: 210mm;
    min-height: 297mm;
    margin: 0 auto;
    background: rgba(255, 255, 255, 0.03);
    padding: 20mm;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
    border-radius: 8px;
    position: relative;
}

/* 报告下载按钮样式 */
.report-action-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    background: rgba(42, 42, 64, 0.8);
    border: 1px solid rgba(0, 180, 219, 0.2);
    color: rgba(255, 255, 255, 0.7);
    border-radius: 8px;
    padding: 8px 15px;
    margin-left: 10px;
    text-decoration: none;
    transition: all var(--transition-speed);
    font-size: 0.9rem;
}

.report-action-btn:hover {
    background: rgba(0, 180, 219, 0.2);
    border-color: rgba(0, 180, 219, 0.4);
    color: white;
    text-decoration: none;
    transform: translateY(-2px);
}

.report-action-btn.disabled {
    opacity: 0.5;
    cursor: not-allowed;
    pointer-events: none;
}

/* 全屏模态框样式 */
.fullscreen-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    z-index: 2000;
    display: none;
    overflow-y: auto;
}

.fullscreen-content {
    padding: 50px;
    max-width: 1200px;
    margin: 0 auto;
    color: white;
}

.close-fullscreen {
    position: fixed;
    top: 20px;
    right: 20px;
    font-size: 2rem;
    color: white;
    cursor: pointer;
    z-index: 2001;
    transition: all var(--transition-speed);
}

.close-fullscreen:hover {
    color: var(--main-accent-color);
    transform: scale(1.1);
}

        :root {
            --transition-speed: 0.3s;
            --scrollbar-width: 8px;
            
            /* 导览部分颜色方案 */
            --nav-primary-color: #6a11cb; /* 深紫色 */
            --nav-secondary-color: #ff5e62; /* 珊瑚红 */
            --nav-accent-color: #00ff9d; /* 霓虹绿 */
            --nav-text-color: #f5f7fa; /* 浅灰白 */
            --nav-bg-color: #1a1a2e; /* 深蓝灰 */
            --nav-card-bg: #2a2a40; /* 中蓝灰 */
            --nav-border-glow: 0 0 10px rgba(106, 17, 203, 0.5);
            
            /* Main部分颜色方案 */
            --main-primary-color: #00b4db; /* 天蓝色 */
            --main-secondary-color: #0083b0; /* 深蓝色 */
            --main-accent-color: #ff9500; /* 暖橙色 */
            --main-text-color: #f3f4f6; /* 浅灰 */
            --main-bg-color: #1a1a2e; /* 深蓝灰 */
            --main-card-bg: #2a2a40; /* 中蓝灰 */
            --main-border-glow: 0 0 10px rgba(0, 180, 219, 0.5);
        }

        body {
            scroll-behavior: smooth;
            background: var(--nav-bg-color);
            font-family: 'Inter', 'PingFang SC', 'Microsoft YaHei', sans-serif;
            color: var(--nav-text-color);
            line-height: 1.7;
            position: relative;
            padding-top: 60px;
            overflow-x: hidden;
        }

        /* 导航栏 - 玻璃态效果 */
        .navbar {
            padding: 15px 0;
            background: rgba(42, 42, 64, 0.8) !important;
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.3);
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            border-bottom: 1px solid rgba(106, 17, 203, 0.3);
        }

        .navbar-brand {
            font-weight: 700;
            color: var(--nav-text-color);
            display: flex;
            align-items: center;
            text-shadow: 0 0 10px rgba(106, 17, 203, 0.5);
        }

        .navbar-brand img {
            margin-right: 10px;
            height: 40px;
            filter: drop-shadow(0 0 5px rgba(106, 17, 203, 0.7));
        }

        .nav-link {
            color: var(--nav-text-color) !important;
            font-weight: 500;
            padding: 10px 20px !important;
            border-radius: 20px;
            transition: all var(--transition-speed);
            margin: 0 5px;
            position: relative;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 2px;
            background: var(--nav-accent-color);
            transition: width var(--transition-speed);
        }

        .nav-link:hover::after, .nav-link.active::after {
            width: 60%;
        }

        .nav-link:hover, .nav-link.active {
            color: white !important;
            text-shadow: 0 0 10px var(--nav-accent-color);
        }

        /* 导览部分样式 */
        .homepage {
            background: var(--nav-bg-color);
            padding: 4rem 0;
            position: relative;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .homepage-header {
            text-align: center;
            margin-bottom: 4rem;
        }

        .homepage-header img {
            margin: 0 auto 20px;
            display: block;
            width: 180px;
            height: auto;
            transition: transform 0.5s ease;
        }

        .homepage-header img:hover {
            transform: scale(1.05);
        }

        .homepage-header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            background: linear-gradient(90deg, var(--nav-primary-color), var(--nav-secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 15px rgba(106, 17, 203, 0.2);
        }

        .homepage-header p {
            font-size: 1.1rem;
            color: #cbd5e1;
            max-width: 800px;
            margin: 0 auto;
        }

        .section-title {
            text-align: center;
            color: var(--nav-text-color);
            font-weight: 700;
            font-size: 2.2rem;
            margin-bottom: 3rem;
            position: relative;
            display: inline-block;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, var(--nav-primary-color), var(--nav-secondary-color));
            border-radius: 4px;
        }

        .quick-access-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
            margin: 40px auto;
            max-width: 1200px;
            padding: 0 20px;
        }

        .quick-access-card {
            background: linear-gradient(135deg, rgba(42, 42, 64, 0.8), rgba(30, 30, 45, 0.8));
            border-radius: 20px;
            padding: 40px 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transition: all var(--transition-speed);
            cursor: pointer;
            text-align: center;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(106, 17, 203, 0.1);
            backdrop-filter: blur(5px);
        }

        .quick-access-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(to right, var(--nav-primary-color), var(--nav-secondary-color));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .quick-access-card:hover::before {
            opacity: 1;
        }

        .quick-access-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
            border-color: rgba(106, 17, 203, 0.3);
        }

        .quick-access-card i {
            font-size: 2.8rem;
            margin-bottom: 25px;
            background: linear-gradient(to right, var(--nav-primary-color), var(--nav-secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            transition: transform 0.5s ease;
        }

        .quick-access-card:hover i {
            transform: scale(1.1) rotate(5deg);
        }

        .quick-access-card h3 {
            color: var(--nav-text-color);
            margin-bottom: 15px;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .quick-access-card p {
            color: #cbd5e1;
            font-size: 1rem;
            margin-bottom: 0;
        }

        /* 平滑滚动到研究部分的指示器 */
        .scroll-indicator {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            animation: bounce 2s infinite;
            opacity: 0.7;
            transition: opacity 0.3s;
        }

        .scroll-indicator:hover {
            opacity: 1;
        }

        .scroll-indicator i {
            font-size: 2rem;
            color: var(--nav-accent-color);
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0) translateX(-50%);
            }
            40% {
                transform: translateY(-20px) translateX(-50%);
            }
            60% {
                transform: translateY(-10px) translateX(-50%);
            }
        }

        /* Main部分容器样式 */
        main.container {
            padding: 50px;
            background: linear-gradient(135deg, rgba(42, 42, 64, 0.8), rgba(30, 30, 45, 0.8));
            backdrop-filter: blur(15px);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
            border-radius: 24px;
            margin: 100px auto;
            border: 1px solid rgba(0, 180, 219, 0.2);
            transition: all var(--transition-speed);
            max-width: 1300px;
            position: relative;
        }

        main.container::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(135deg, var(--main-primary-color), var(--main-secondary-color));
            z-index: -1;
            border-radius: 24px;
            opacity: 0;
            transition: opacity var(--transition-speed);
        }

        main.container:hover::before {
            opacity: 1;
        }

        /* Main部分输入框样式 */
        main input, main select, main textarea, main #output, main #reportContainer {
            background: rgba(42, 42, 64, 0.8);
            border: 1px solid rgba(0, 180, 219, 0.3);
            color: var(--main-text-color);
            transition: all var(--transition-speed);
            border-radius: 12px;
            padding: 16px 24px;
            font-size: 1.05rem;
            width: 100%;
            backdrop-filter: blur(5px);
        }

        main input:hover, main input:focus, 
        main select:hover, main select:focus,
        main textarea:hover, main textarea:focus {
            border-color: var(--main-accent-color);
            box-shadow: 0 0 20px rgba(255, 149, 0, 0.3);
            outline: none;
            transform: translateY(-2px);
        }

        /* Main部分按钮样式 */
        main .btn-primary {
            background: linear-gradient(45deg, var(--main-primary-color), var(--main-secondary-color));
            border: none;
            transition: all var(--transition-speed);
            font-size: 1.2rem;
            padding: 16px 40px;
            border-radius: 50px;
            min-width: 220px;
            text-align: center;
            box-shadow: 0 0 30px rgba(0, 180, 219, 0.5);
            font-weight: 600;
            letter-spacing: 0.8px;
            position: relative;
            overflow: hidden;
            color: white;
            z-index: 1;
            transform: translateY(0);
        }

        main .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, var(--main-secondary-color), var(--main-primary-color));
            opacity: 0;
            transition: opacity var(--transition-speed);
            z-index: -1;
        }

        main .btn-primary:hover::before {
            opacity: 1;
        }

        main .btn-primary:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 40px rgba(0, 180, 219, 0.7);
            text-shadow: 0 0 10px white;
        }

        main .btn-primary:active {
            transform: translateY(0);
            box-shadow: 0 0 20px rgba(0, 180, 219, 0.5);
        }

        /* Main部分标题样式 */
        main .research-output-container h2, 
        main .report-container h2,
        main .chat-container h2 {
            color: var(--main-text-color);
            font-weight: 700;
            font-size: 2rem;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            display: flex;
            align-items: center;
            position: relative;
        }

        main .research-output-container h2::after, 
        main .report-container h2::after,
        main .chat-container h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, var(--main-primary-color), var(--main-secondary-color));
            border-radius: 4px;
        }

        /* 滚动容器样式 */
        .scrollable-container {
            position: relative;
            border-radius: 16px;
            margin-top: 20px;
            background: rgba(30, 30, 45, 0.5);
            border: 1px solid rgba(0, 180, 219, 0.1);
            transition: all var(--transition-speed);
        }

        .scrollable-container:hover {
            border-color: rgba(0, 180, 219, 0.3);
        }

        /* 自定义滚动条 */
        .scrollable-container::-webkit-scrollbar {
            width: var(--scrollbar-width);
        }

        .scrollable-container::-webkit-scrollbar-track {
            background: rgba(30, 30, 45, 0.8);
            border-radius: 10px;
        }

        .scrollable-container::-webkit-scrollbar-thumb {
            background: linear-gradient(to bottom, var(--main-primary-color), var(--main-secondary-color));
            border-radius: 10px;
            opacity: 0.7;
            transition: opacity var(--transition-speed);
        }

        .scrollable-container::-webkit-scrollbar-thumb:hover {
            opacity: 1;
        }

        /* 数据网格效果 */
        .tech-grid {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                linear-gradient(rgba(106, 17, 203, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(106, 17, 203, 0.05) 1px, transparent 1px);
            background-size: 40px 40px;
            pointer-events: none;
            z-index: -1;
            opacity: 0.5;
        }

        /* 响应式调整 */
        @media (max-width: 992px) {
            .homepage-header h1 {
                font-size: 2rem;
            }
            
            .homepage-header p {
                font-size: 1rem;
            }
            
            .quick-access-grid {
                grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
                gap: 20px;
            }
            
            .quick-access-card {
                padding: 30px 20px;
            }
            
            .quick-access-card i {
                font-size: 2.2rem;
            }
            
            .quick-access-card h3 {
                font-size: 1.3rem;
            }
            
            main.container {
                padding: 30px;
                margin: 60px auto;
            }
            
            main .btn-primary {
                padding: 14px 30px;
                min-width: 180px;
                font-size: 1rem;
            }
        }

        @media (max-width: 768px) {
            html, body {
                padding-top: 70px;
            }
            
            .container {
                padding: 20px;
                margin: 30px auto;
            }
            
            .nav-link {
                padding: 8px 15px !important;
                margin: 5px 0;
            }
            
            .nav-buttons {
                top: 15px;
                right: 15px;
            }
            
            .top-history-button, 
            .top-websocket-button {
                min-width: auto;
                padding: 8px 12px;
                font-size: 0;
            }
            
            .top-history-button i, 
            .top-websocket-button i {
                margin-right: 0;
                font-size: 1.2rem;
            }
            
            .scroll-to-bottom {
                width: 50px;
                height: 50px;
                bottom: 20px;
                right: 20px;
            }
            
            main .research-output-container h2, 
            main .report-container h2,
            main .chat-container h2 {
                font-size: 1.6rem;
            }
            
            .scrollable-container {
                max-height: 350px;
            }
        }

        /* 历史面板 */
        .history-panel {
            position: fixed;
            right: -380px;
            top: 0;
            width: 380px;
            height: 100vh;
            background-color: rgba(42, 42, 64, 0.95);
            box-shadow: -10px 0 30px rgba(0, 0, 0, 0.3);
            transition: right 0.5s cubic-bezier(0.77, 0.2, 0.05, 1.0);
            z-index: 1000;
            padding: 2rem;
            overflow-y: auto;
            border-left: 1px solid rgba(106, 17, 203, 0.2);
            backdrop-filter: blur(10px);
        }

        .history-panel.active {
            right: 0;
        }

        /* Markdown内容样式 */
        #reportContainer h1, 
        #reportContainer h2, 
        #reportContainer h3 {
            color: var(--main-text-color);
            margin-top: 2rem;
            margin-bottom: 1.2rem;
            font-weight: 600;
        }

        #reportContainer h1 {
            font-size: 1.8rem;
            border-bottom: 1px solid rgba(0, 180, 219, 0.2);
            padding-bottom: 0.5rem;
        }

        #reportContainer h2 {
            font-size: 1.5rem;
        }

        #reportContainer h3 {
            font-size: 1.3rem;
        }

        #reportContainer p {
            margin-bottom: 1.2rem;
            color: #e2e8f0;
            line-height: 1.8;
        }

        #reportContainer a {
            color: var(--main-primary-color);
            text-decoration: none;
            transition: all 0.3s;
            position: relative;
            display: inline-block;
        }

        #reportContainer a::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -2px;
            left: 0;
            background-color: var(--main-accent-color);
            transition: width 0.3s;
        }

        #reportContainer a:hover {
            color: var(--main-accent-color);
        }

        #reportContainer a:hover::after {
            width: 100%;
        }

        

        #reportContainer pre {
            background-color: rgba(30, 30, 45, 0.8);
            padding: 1.5rem;
            border-radius: 10px;
            overflow-x: auto;
            color: #e2e8f0;
            border: 1px solid rgba(0, 180, 219, 0.2);
            margin-bottom: 1.5rem;
            transition: all 0.3s;
        }

        

        #reportContainer blockquote {
            border-left: 4px solid var(--main-secondary-color);
            padding-left: 1.5rem;
            margin-left: 0;
            color: #94a3b8;
            background-color: rgba(0, 131, 176, 0.05);
            font-style: italic;
            padding-top: 1rem;
            padding-bottom: 1rem;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
        }

        #reportContainer table {
            border-collapse: collapse;
            width: 100%;
            margin-bottom: 1.5rem;
        }

        #reportContainer th, 
        #reportContainer td {
            border: 1px solid rgba(0, 180, 219, 0.2);
            padding: 12px;
            text-align: left;
            color: #e2e8f0;
        }

        #reportContainer th {
            background-color: rgba(0, 180, 219, 0.1);
            font-weight: 600;
        }

        #reportContainer tr:hover {
            background-color: rgba(0, 180, 219, 0.05);
        }

        /* 聊天容器 */
        .chat-messages {
            max-height: 400px;
            overflow-y: auto;
            padding: 20px;
            background: rgba(30, 30, 45, 0.7);
            border-radius: 16px;
            margin-bottom: 20px;
            border: 1px solid rgba(0, 180, 219, 0.1);
        }

        .chat-message {
            margin-bottom: 20px;
            padding: 15px 20px;
            border-radius: 16px;
            position: relative;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.3s ease-out;
        }

        .chat-message.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .chat-message.user {
            background: linear-gradient(135deg, rgba(0, 131, 176, 0.1), rgba(0, 131, 176, 0.05));
            border: 1px solid rgba(0, 131, 176, 0.2);
            text-align: right;
            margin-left: 20%;
        }

        .chat-message.ai {
            background: linear-gradient(135deg, rgba(0, 180, 219, 0.1), rgba(0, 180, 219, 0.05));
            border: 1px solid rgba(0, 180, 219, 0.2);
            margin-right: 20%;
        }

        .chat-input-container {
            display: flex;
            gap: 15px;
            align-items: flex-end;
        }

        .chat-input {
            flex-grow: 1;
        }

        /* 展开按钮样式 */
        .expand-button {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.5);
            margin-left: 15px;
            transition: all 0.3s;
            padding: 0;
            font-size: 1.2rem;
        }

        .expand-button:hover {
            color: rgba(255, 255, 255, 0.8);
            transform: scale(1.1);
        }

        /* 微调器样式 */
        .modern-spinner {
            display: inline-block;
            width: 24px;
            height: 24px;
            margin-right: 15px;
            border: 3px solid rgba(0, 180, 219, 0.3);
            border-radius: 50%;
            border-top-color: var(--main-primary-color);
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* 加载状态样式 */
        .loading-placeholder {
            position: relative;
            overflow: hidden;
            background-color: rgba(30, 30, 45, 0.5);
            border-radius: 5px;
            margin-bottom: 10px;
            height: 20px;
        }

        .loading-placeholder::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            transform: translateX(-100%);
            background: linear-gradient(90deg, 
                rgba(30, 30, 45, 0.5), 
                rgba(42, 42, 64, 0.8), 
                rgba(30, 30, 45, 0.5));
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            100% {
                transform: translateX(100%);
            }
        }

        /* 报告容器样式 */
        #reportContainer {
            min-height: 300px;
            max-height: 700px;
            overflow-y: auto;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 16px;
            padding: 40px;
            line-height: 1.8;
            position: relative;
        }

        /* A4纸样式 */
        .a4-container {
            width: 210mm;
            min-height: 297mm;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.03);
            padding: 20mm;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            position: relative;
        }

        /* 报告下载按钮样式 */
        .report-action-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: rgba(42, 42, 64, 0.8);
            border: 1px solid rgba(0, 180, 219, 0.2);
            color: rgba(255, 255, 255, 0.7);
            border-radius: 8px;
            padding: 8px 15px;
            margin-left: 10px;
            text-decoration: none;
            transition: all var(--transition-speed);
            font-size: 0.9rem;
        }

        .report-action-btn:hover {
            background: rgba(0, 180, 219, 0.2);
            border-color: rgba(0, 180, 219, 0.4);
            color: white;
            text-decoration: none;
            transform: translateY(-2px);
        }

        .report-action-btn.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            pointer-events: none;
        }

        /* 全屏模态框样式 */
        .fullscreen-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            display: none;
            overflow-y: auto;
        }

        .fullscreen-content {
            padding: 50px;
            max-width: 1200px;
            margin: 0 auto;
            color: white;
        }

        .close-fullscreen {
            position: fixed;
            top: 20px;
            right: 20px;
            font-size: 2rem;
            color: white;
            cursor: pointer;
            z-index: 2001;
            transition: all var(--transition-speed);
        }

        .close-fullscreen:hover {
            color: var(--main-accent-color);
            transform: scale(1.1);
        }




    </style>
</head>

<body>
    <!-- 数据网格背景 -->
    <div class="tech-grid"></div>
    
    <!-- 导航按钮 -->
    <div class="nav-buttons">
        <button id="historyPanelToggle" class="top-history-button">
            <i class="fas fa-history"></i> 历史
        </button>
        <button id="websocketButton" class="top-websocket-button">
            <i class="fas fa-plug"></i> 连接
        </button>
    </div>

    <div class="homepage">
        <div class="homepage-header">
            <img src="./static/seres.png" alt="赛力斯Logo" width="120" style="margin: 0 auto 20px; display: block;">
            <h1 style="text-align: center;">AI情报中枢</h1>
            <p style="text-align: center;">智能分析平台，为您提供最新行业动态和深度研究报告</p>
        </div>
        <a href="#form" class="btn btn-primary">开始研究</a>
        
        
        <div class="quick-access-grid">
            <div class="quick-access-card" data-target="index.html">
                <i class="fas fa-search"></i>
                <h3>报告研究助手</h3>
                <p>自动获取数据高效分析研究</p>
            </div>
            
            <div class="quick-access-card" data-target="data.html">
                <i class="fas fa-chart-line"></i>
                <h3>数据研究助手</h3>
                <p>了解数据分析和调研领域的最新趋势</p>
            </div>
            
            <div class="quick-access-card" data-target="comment.html">
                <i class="fas fa-comments"></i>
                <h3>舆情关注助手</h3>
                <p>实时监测和分析行业舆情动态</p>
            </div>
            
            <div class="quick-access-card" data-target="none.html">
                <i class="fas fa-file-invoice-dollar"></i>
                <h3>财报分析助手</h3>
                <p>深度解析企业财务报告数据</p>
            </div>
            
            <div class="quick-access-card" data-target="data.html">
                <i class="fas fa-chess"></i>
                <h3>竞品监测助手</h3>
                <p>实时跟踪竞争对手动态</p>
            </div>
            
            <div class="quick-access-card" data-target="a.html">
                <i class="fas fa-newspaper"></i>
                <h3>AI读报助手</h3>
                <p>智能摘要文档内容</p>
            </div>
        </div>
    </div>

    <!-- 滚动到底部按钮 -->
    <div class="scroll-to-bottom" id="scrollToBottomBtn">
        <i class="fas fa-arrow-down"></i>
    </div>

   
           
          
            
        </div>
    <main class="container" id="form">
        
        <form method="POST" class="mt-3" id="researchForm">
            <div class="form-group">
                <label for="task" class="agent-question">您希望我接下来研究什么？</label>
                <textarea id="task" name="task" class="form-control highlight-connection" placeholder="输入任何主题、问题或想法..." required autocomplete="on"></textarea>
                <input type="radio" name="agent" id="autoAgent" value="自动代理" checked hidden>
            </div>
            
            <div class="form-group">
                <label for="report_type" class="agent-question">您希望生成什么类型的报告？</label>
                <select name="report_type" id="report_type" class="form-control highlight-connection" required>
                    <option value="research_report">摘要 - 简短快速 (~2分钟)</option>
                    <option value="detailed_report">详细 - 深入且较长 (~5分钟)</option>
                    <option value="deep">深度研究</option>
                    <option value="custom_report1">竞品车型分析</option>
                    <option value="custom_report2">舆情分析</option>
                </select>
            </div>
            <div class="form-group">
                <label for="tone" class="agent-question">您希望报告采用什么语气？</label>
                <select name="tone" id="tone" class="form-control highlight-connection" required>
                    <option value="Objective">客观 - 公正无偏见地呈现事实和发现</option>
                    <option value="Formal">正式 - 遵循学术标准，使用复杂的语言和结构</option>
                    <option value="Analytical">分析性 - 对数据和理论进行批判性评估和详细检查</option>
                    <option value="Persuasive">说服性 - 说服听众接受特定观点或论点</option>
                    <option value="Informative">信息性 - 提供关于主题的清晰全面信息</option>
                    <option value="Explanatory">解释性 - 澄清复杂概念和过程</option>
                    <option value="Descriptive">描述性 - 详细描述现象、实验或案例研究</option>
                    <option value="Critical">批判性 - 判断研究的有效性和相关性及其结论</option>
                    <option value="Comparative">比较性 - 并列不同理论、数据或方法以突出异同</option>
                    <option value="Speculative">推测性 - 探索假设和潜在影响或未来研究方向</option>
                    <option value="Reflective">反思性 - 考虑研究过程和个人见解或经验</option>
                    <option value="Narrative">叙述性 - 讲述故事以说明研究发现或方法</option>
                    <option value="Humorous">幽默 - 轻松愉快，通常使内容更相关</option>
                    <option value="Optimistic">乐观 - 突出积极发现和潜在好处</option>
                    <option value="Pessimistic">悲观 - 关注限制、挑战或负面结果</option>
                </select>
            </div>
            <div class="form-group">
                <label for="report_source" class="agent-question">您希望我从哪些来源进行研究？</label>
                <p class="text-left mt-0 pt-0" style="font-size: 0.7rem;">您现在也可以研究本地文档。请确保添加指向文档文件夹的DOC_PATH环境变量。</p>
                <select name="report_source" id="report_source" class="form-control highlight-connection" required>
                    <option value="web">互联网</option>
                    <option value="local">我的文档</option>
                    <option value="hybrid">混合</option>
                </select>
            </div>
            <div class="form-group">
                <label for="queryDomains" class="form-label">查询域名(可选)</label>
                <input type="text" class="form-control highlight-connection" id="queryDomains" name="query_domains" placeholder="输入域名，用逗号分隔" autocomplete="on">
                <small class="text-muted">例如：techcrunch.com, forbes.com</small>
            </div>
            <input type="submit" value="开始研究" class="btn btn-primary button-padding" id="submitButton">
        </form>

        <!-- 在研究进度部分上方添加JSON按钮 -->
        <div class="margin-div" id="jsonButtonContainer" style="display: none; text-align: right; margin-bottom: 10px;">
            <a id="downloadLinkJsonTop" href="#" class="report-action-btn disabled" target="_blank" rel="noopener noreferrer">
                <i class="fas fa-file-code"></i> JSON
            </a>
        </div>

        <div class="margin-div research-output-container">
            <!-- 将微调器移动到文本左侧 -->
            <h2><div id="modernSpinner" class="modern-spinner"></div> 研究进度 <button id="expandOutputBtn" class="expand-button" title="展开"><i class="fas fa-expand-alt"></i></button></h2>
            <p class="mt-2 text-left" style="font-size: 0.8rem;">
                实时观察AI如何收集信息并分析您的主题。</p>
            <div class="scrollable-container">
                <div id="output"></div>
            </div>
        </div>
        <div class="images_div">
            <div id="selectedImagesContainer" style="display: none;"></div>
        </div>
        <div class="margin-div report-container">
            <h2>研究报告
                <button id="copyToClipboardTop" class="icon-button" title="复制" style="display: none;">
                    <i class="fas fa-copy"></i>
                </button>
                <button id="expandReportBtn" class="expand-button" title="展开">
                    <i class="fas fa-expand-alt"></i>
                </button>
            </h2>
            <!-- 在报告容器上方添加下载按钮 -->
            <div class="report-actions" style="display: none;">
                <a id="downloadLinkTop" href="#" class="report-action-btn disabled" target="_blank" rel="noopener noreferrer">
                    <i class="fas fa-file-pdf"></i> PDF
                </a>
                <a id="downloadLinkWordTop" href="#" class="report-action-btn disabled" target="_blank" rel="noopener noreferrer">
                    <i class="fas fa-file-word"></i> Word
                </a>
                <a id="downloadLinkMdTop" href="#" class="report-action-btn disabled" target="_blank" rel="noopener noreferrer">
                    <i class="fas fa-file-lines"></i> Markdown
                </a>
            </div>
            <div class="scrollable-container">
                <div id="reportContainer"></div>
            </div>
            <div id="reportActions" style="display: none;">
                <div class="alert alert-info" role="alert" id="status"></div>
            </div>
        </div>

        <!-- 聊天容器 -->
        <div class="margin-div chat-container" id="chatContainer" style="display: none;">
            <h2><i class="fas fa-comments"></i> 与AI讨论此研究 <button id="expandChatBtn" class="expand-button" title="展开"><i class="fas fa-expand-alt"></i></button></h2>
            <p class="text-muted">提出问题以获取更多研究见解</p>
            <div id="chatMessages" class="chat-messages"></div>
            <div class="chat-input-container">
                <textarea id="chatInput" class="form-control chat-input" placeholder="询问有关此研究的问题..." rows="2"></textarea>
                <button id="voiceInputBtn" class="btn btn-secondary" title="使用语音输入">
                    <i class="fas fa-microphone"></i>
                </button>
                <button id="sendChatBtn" class="btn btn-primary">
                    <i class="fas fa-paper-plane"></i> 发送
                </button>
            </div>
        </div>
    </main>

    <!-- 对话历史面板 -->
    <div class="history-panel" id="historyPanel">
        <div class="history-panel-header">
            <h3><i class="fas fa-history"></i> 研究历史</h3>
            <div class="history-panel-actions">
                <button id="historyPanelToggle" class="history-action-btn" title="关闭面板">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        <div class="history-panel-search">
            <input type="text" id="historySearch" placeholder="搜索研究历史...">
            <button id="historySearchBtn" class="history-action-btn" title="搜索">
                <i class="fas fa-search"></i>
            </button>
        </div>
        <div class="history-panel-filters">
            <select id="historySortOrder">
                <option value="newest">最新优先</option>
                <option value="oldest">最早优先</option>
            </select>
            <button id="historyClearBtn" class="history-action-btn" title="清除所有历史">
                <i class="fas fa-trash-alt"></i>
            </button>
        </div>
        <div class="history-panel-entries" id="historyEntries">
            <!-- 条目将动态填充 -->
        </div>
    </div>
    
    <footer>
        <p>Seres 研究助手 &copy; 2025</p>
    </footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/1.9.1/showdown.min.js"></script>
    <script src="site/scripts.js"></script>
    <script>
    // Auto-resize textarea as content grows
        const taskTextarea = document.getElementById('task');
        if (taskTextarea) {
            // Set initial height
            taskTextarea.setAttribute('style', 'height: 38px; overflow-y: hidden;');

            // Function to resize textarea based on content
            const resizeTextarea = () => {
                taskTextarea.style.height = 'auto';
                taskTextarea.style.height = taskTextarea.scrollHeight + 'px';
            };

            // Add event listeners for input and focus
            taskTextarea.addEventListener('input', resizeTextarea);
            taskTextarea.addEventListener('focus', resizeTextarea);
        }

        // Scroll to bottom button functionality
        const scrollToBottomBtn = document.getElementById('scrollToBottomBtn');

        // Handle scroll events
        window.addEventListener('scroll', function() {
            // Other scroll functionality can go here if needed
        });

        // Scroll to bottom button click event
        scrollToBottomBtn.addEventListener('click', function() {
            window.scrollTo({
                top: document.body.scrollHeight,
                behavior: 'smooth'
            });
        });

        // Ensure feature panels are positioned correctly on window resize
        window.addEventListener('resize', function () {
            // Adjust the feature panel width based on screen size
            const viewportWidth = window.innerWidth;
            const featurePanel = document.querySelector('.feature-panel');

            if (featurePanel) {
                if (viewportWidth < 1400) {
                    featurePanel.style.display = 'none';
                } else {
                    featurePanel.style.display = 'block';
                    // Adjust width based on screen size
                    const panelWidth = Math.min(280, Math.max(200, viewportWidth * 0.15));
                    featurePanel.style.width = `${panelWidth}px`;
                }
            }
        });

        // Manually trigger the scroll event once on load to correctly set the scroll button visibility
        window.addEventListener('DOMContentLoaded', function () {
            setTimeout(() => {
                window.dispatchEvent(new Event('scroll'));
            }, 100);
        });
    </script>
</body>
</html>
    